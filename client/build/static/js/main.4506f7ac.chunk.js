(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{141:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a(1),n=a.n(s),i=a(25),l=a.n(i),r=(a(141),a(8)),o=a(4),d=a(5),j=a(36),b=a(0),u=function(){return Object(b.jsx)("div",{className:"header bg-overlay"})},h=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=(t[0],t[1]);return Object(b.jsx)("div",{className:"search",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsxs)("div",{className:"input-box",children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"})}),Object(b.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0438\u043b\u0438 \u043d\u043e\u0432\u044b\u0439 \u0447\u0430\u0442"})]})})})},O=a(11),g=a.n(O),m=function(e){return{type:"LOADING_USER",payload:e}},x=a(134),p=a(29),v={userData:{},loading:!1,infoAboutUser:{bool:!1,id:null}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(c.a)(Object(c.a)({},e),{},{userData:t.payload});case"USER_LOGOUT":return M.emit("logout"),Object(c.a)(Object(c.a)({},e),{},{userData:{}});case"USER_UPDATE_NAME":return Object(c.a)(Object(c.a)({},e),{},{userData:Object(c.a)(Object(c.a)({},e.userData),{},{name:t.payload})});case"USER_UPDATE_ABOUT":return Object(c.a)(Object(c.a)({},e),{},{userData:Object(c.a)(Object(c.a)({},e.userData),{},{description:t.payload})});case"USER_UPDATE_PHOTO":return Object(c.a)(Object(c.a)({},e),{},{userData:Object(c.a)(Object(c.a)({},e.userData),{},{photo:t.payload})});case"INFO_ABOUT_USER_SET":return Object(c.a)(Object(c.a)({},e),{},{infoAboutUser:t.payload});default:return e}},w={userLoading:!0},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USER":return Object(c.a)(Object(c.a)({},e),{},{userLoading:t.payload});default:return e}},N=a(15),S={dialogs:{},dialogsOrder:[],activeDialog:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DIALOGS_SET":return Object(c.a)(Object(c.a)({},e),{},{dialogs:t.payload});case"DIALOG_ACTIVE_SET":return Object(c.a)(Object(c.a)({},e),{},{activeDialog:t.payload});case"DIALOG_ORDER_SET":return Object(c.a)(Object(c.a)({},e),{},{dialogsOrder:t.payload});case"DIALOG_USER_ONLINE_SET":return Object(c.a)(Object(c.a)({},e),{},{dialogs:Object(c.a)(Object(c.a)({},e.dialogs),{},Object(N.a)({},t.dialogId,Object(c.a)(Object(c.a)({},e.dialogs[t.dialogId]),{},{status:t.payload})))});case"DIALOG_LAST_MESSAGE_SET":return Object(c.a)(Object(c.a)({},e),{},{dialogs:Object(c.a)(Object(c.a)({},e.dialogs),{},Object(N.a)({},t.dialogId,Object(c.a)(Object(c.a)({},e.dialogs[t.dialogId]),{},{dialog:Object(c.a)(Object(c.a)({},e.dialogs[t.dialogId].dialog),{},{last_message:t.payload.text,last_message_time:t.payload.time,last_message_owner:t.payload.owner,last_message_status:t.payload.status})})))});case"DIALOG_ORDER_CHANGE":var a=e.dialogsOrder,s=t.payload;return a.splice(a.indexOf(s),1),a.unshift(s),Object(c.a)(Object(c.a)({},e),{},{dialogsOrder:a});case"DIALOG_NEW_SET":var n=e.dialogsOrder;return n.unshift(t.dialogId),Object(c.a)(Object(c.a)({},e),{},{dialogs:Object(c.a)(Object(c.a)({},e.dialogs),{},Object(N.a)({},t.dialogId,t.payload)),dialogsOrder:n});case"DIALOG_LAST_MESSAGE_STATUS_SET":return Object(c.a)(Object(c.a)({},e),{},{dialogs:Object(c.a)(Object(c.a)({},e.dialogs),{},Object(N.a)({},t.dialogId,Object(c.a)(Object(c.a)({},e.dialogs[t.dialogId]),{},{dialog:Object(c.a)(Object(c.a)({},e.dialogs[t.dialogId].dialog),{},{last_message_status:t.payload})})))});case"DIALOG_DELETE_ONE":var i=e.dialogs;delete i[t.payload];var l=e.dialogsOrder;return l.splice(l.indexOf(t.payload),1),Object(c.a)(Object(c.a)({},e),{},{dialogs:i,dialogsOrder:l});case"DIALOG_DELETE_INFO":return Object(c.a)(Object(c.a)({},e),{},{dialogs:Object(c.a)(Object(c.a)({},e.dialogs),{},Object(N.a)({},t.payload,Object(c.a)(Object(c.a)({},e.dialogs[t.payload]),{},{name:t.name,photo:"DR7pkQw8DqX4F8FmUIHw_a5YEzo0gP3nHOptm6apiyzg_xEs_VcyQq9pQEH6FdY0wOl95xh8_hkepcq",id:"",status:!1,description:"Recipient deleted this chat",email:"DELETED",telephone:"DELETED",deleted:!0})))});default:return e}},y={newMessages:[],status:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_NEW_SET":var a;return e.newMessages?(a=e.newMessages).unshift(t.payload):a=[t.payload],Object(c.a)(Object(c.a)({},e),{},{newMessages:a});case"MESSAGES_NEW_STATUS_SET":var s=e.newMessages;return s.map((function(e){e.status=!0})),Object(c.a)(Object(c.a)({},e),{},{newMessages:s});case"MESSAGES_NEW_DELETE":return Object(c.a)(Object(c.a)({},e),{},{newMessages:[]});case"MESSAGES_STATUS_SET":return Object(c.a)(Object(c.a)({},e),{},{status:!e.status});case"MESSAGES_NEW_ID_SET":for(var n=e.newMessages,i=0;i<n.length;i++)"none"===n[i]._id&&(n[i]._id=t.payload,i=n.length);return Object(c.a)(Object(c.a)({},e),{},{newMessages:n});default:return e}},I=Object(p.c)({user:f,loading:E,dialog:_,message:A}),D=a(135),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,L=Object(p.e)(I,k(Object(p.a)(D.a))),T=function(e){return{type:"MESSAGES_NEW_SET",payload:e}},C=Object(x.io)();C.on("userOnline",(function(e){L.dispatch(R(e.dialogId,e.status))})),C.on("newMessage",(function(e){L.getState().dialog.activeDialog===e.dialogId&&(L.dispatch(T(e)),C.emit("messageAllStatus",{dialogId:e.dialogId,id:L.getState().user.userData.userId})),L.dispatch(F(e.dialogId,e)),L.getState().dialog.activeDialog===e.dialogId&&L.dispatch(H(e.dialogId)),L.getState().dialog.dialogsOrder[0]!==e.dialogId&&L.dispatch(P(e.dialogId))})),C.on("newDialog",(function(e){L.dispatch(q(e.dialogId,e.newDialog))})),C.on("messageAllStatus",(function(e){L.dispatch(H(e.dialogId)),L.getState().dialog.activeDialog===e.dialogId&&(L.dispatch({type:"MESSAGES_STATUS_SET"}),L.dispatch({type:"MESSAGES_NEW_STATUS_SET"}))})),C.on("newMessageId",(function(e){L.dispatch(function(e){return{type:"MESSAGES_NEW_ID_SET",payload:e}}(e))})),C.on("dialogDelete",(function(e,t){L.dispatch(W(e,t))}));var M=C,z=function(e){return function(t){return g.a.get("/api/dialog/find",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t(U(e.data.answer)),t(B(e.data.order)),t(m(!1))}))}},B=function(e){return{type:"DIALOG_ORDER_SET",payload:e}},G=function(e){return{type:"DIALOG_ACTIVE_SET",payload:e}},U=function(e){return{type:"DIALOGS_SET",payload:e}},R=function(e,t){return{type:"DIALOG_USER_ONLINE_SET",payload:t,dialogId:e}},F=function(e,t){return{type:"DIALOG_LAST_MESSAGE_SET",payload:t,dialogId:e}},P=function(e){return{type:"DIALOG_ORDER_CHANGE",payload:e}},q=function(e,t){return{type:"DIALOG_NEW_SET",payload:t,dialogId:e}},H=function(e){return{type:"DIALOG_LAST_MESSAGE_STATUS_SET",payload:!0,dialogId:e}},V=function(e){return{type:"DIALOG_DELETE_ONE",payload:e}},W=function(e,t){return{type:"DIALOG_DELETE_INFO",payload:e,name:t}},Y=a(17),J=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.dialog})),a=t.dialogs,c=t.activeDialog,n=t.dialogsOrder,i=Object(d.c)((function(e){return e.user})).userData,l=Object(s.useState)(""),r=Object(o.a)(l,2),j=r[0],u=r[1],h=Object(s.useState)(""),O=Object(o.a)(h,2),g=O[0],m=O[1];Object(s.useEffect)((function(){var e=new Date;e.setDate(e.getDate()-1),e=Q(e),m(e),u(Q())}),[]);return Object(b.jsxs)("div",{className:"dialogs",children:[a!=={}&&n.map((function(t){var s=a[t],n=0;return s.dialog.last_message_time.split(" ")[0]===j?n=1:s.dialog.last_message_time.split(" ")[0]===g&&(s.dialog.last_message_time="yesterday"),Object(b.jsxs)("div",{onClick:function(){e(G(t))},className:c===t?"dialog active":"dialog",children:[Object(b.jsx)(Y.a,{cloudName:"artemijss",publicId:s.photo?s.photo:"tkixqcinuntqmalr2dej"}),Object(b.jsxs)("div",{className:"details",children:[Object(b.jsxs)("div",{className:"dialog-info1",children:[Object(b.jsx)("div",{style:s.deleted&&{color:"rgb(214,48,46)"},className:"dialog-name big-text ".concat(s.dialog.last_message_owner===i.userId||s.dialog.last_message_status?"":"bold"),children:s.name}),Object(b.jsx)("div",{className:"mssg-time ".concat(s.dialog.last_message_owner===i.userId||s.dialog.last_message_status?"":"black bold"),children:s.dialog.last_message_time?s.dialog.last_message_time.split(" ")[n]:""})]}),Object(b.jsxs)("div",{className:"last-message_notification",children:[Object(b.jsxs)("div",{className:"last-message big-text ".concat(s.dialog.last_message_owner!==i.userId?"noPadding":""),children:[s.dialog.last_message&&Object(b.jsx)("span",{className:s.dialog.last_message_owner===i.userId?"".concat(s.dialog.last_message_status?"opened":""):"none",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:Object(b.jsx)("path",{fill:"currentColor",d:"M17.394 5.035l-.57-.444a.434.434 0 0 0-.609.076l-6.39 8.198a.38.38 0 0 1-.577.039l-.427-.388a.381.381 0 0 0-.578.038l-.451.576a.497.497 0 0 0 .043.645l1.575 1.51a.38.38 0 0 0 .577-.039l7.483-9.602a.436.436 0 0 0-.076-.609zm-4.892 0l-.57-.444a.434.434 0 0 0-.609.076l-6.39 8.198a.38.38 0 0 1-.577.039l-2.614-2.556a.435.435 0 0 0-.614.007l-.505.516a.435.435 0 0 0 .007.614l3.887 3.8a.38.38 0 0 0 .577-.039l7.483-9.602a.435.435 0 0 0-.075-.609z"})})}),Object(b.jsx)("span",{className:s.dialog.last_message_owner===i.userId||s.dialog.last_message_status?"":"black",children:s.dialog.last_message})]}),s.dialog.last_message_owner!==i.userId&&!s.dialog.last_message_status&&Object(b.jsx)("div",{className:"notification",children:Object(b.jsx)("span",{children:"!"})})]})]})]},t)})),0===n.length&&Object(b.jsxs)("div",{className:"no_chat",children:[Object(b.jsx)("p",{children:"You don't have any active chats yet."}),Object(b.jsx)("p",{children:"Use search to find friends!"})]})]})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var c=e.getFullYear();return"".concat(t,"/").concat(a,"/").concat(c)},X=function(){var e=Object(d.c)((function(e){return e.dialog})),t=e.activeDialog,a=e.dialogs,c=Object(d.c)((function(e){return e.user.userData})),n=c.token,i=c.userId,l=Object(d.c)((function(e){return e.message})),r=l.newMessages,j=l.status,u=Object(s.useState)([]),h=Object(o.a)(u,2),O=h[0],m=h[1],x=Object(s.useState)(!0),p=Object(o.a)(x,2),v=p[0],f=p[1];Object(s.useEffect)((function(){f(!0),g.a.get("/api/message/find/".concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){m(e.data),f(!1)}),(function(e){console.log(e),f(!1)}))}),[t,n]),Object(s.useEffect)((function(){if(null!==j)for(var e=document.querySelectorAll(".time-status svg.notOpened"),t=0;t<e.length;t++)e[t].className.baseVal="opened"}),[j]);var w=Object(s.useState)(""),E=Object(o.a)(w,2),N=E[0],S=E[1],_=Object(s.useState)(""),y=Object(o.a)(_,2),A=y[0],I=y[1];return Object(s.useEffect)((function(){var e=new Date;e.setDate(e.getDate()-1),e=Z(e),I(e),S(Z())}),[]),Object(b.jsxs)("div",{className:"chat",children:[a[t].deleted&&Object(b.jsx)("div",{className:"date",children:Object(b.jsxs)("span",{children:[a[t].name," DELETED THIS CHAT - YOU CAN'T SEND MESSAGES"]})}),r&&r.map((function(e,t){return Object(b.jsxs)("div",{className:"message-block ".concat(i===e.owner?"message-out":"message-in"),children:[Object(b.jsx)("div",{className:"message",children:Object(b.jsxs)("div",{className:"text-block",children:[Object(b.jsx)("div",{className:"text",children:e.text}),Object(b.jsxs)("div",{className:"time-status",children:[e.time.split(" ")[1],Object(b.jsx)("svg",{className:"none"!==e._id?e.status?"opened":"":"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15",children:Object(b.jsx)("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})})]})]})}),Object(b.jsx)("svg",{className:"triangle",id:"82734756-3615-4ec8-a382-6c6e9d1975af","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.96699 58.57164",children:Object(b.jsx)("path",{className:"0082bf7a-a2e0-46d1-be00-84645c2dcbc6",d:"M280.49486,515.96866l-44.88734,15.11513a.69234.69234,0,0,1-.221.03621H214.69244A.69245.69245,0,0,1,214,530.42756V515.31243a.69244.69244,0,0,1,.69244-.69243h65.58144A.69243.69243,0,0,1,280.49486,515.96866Z",transform:"translate(-213.5 -514.12)"})})]},t+e._id)})),!v&&O.map((function(e){return e.msg.map((function(t,a){return Object(b.jsxs)("div",{children:[a===e.msg.length-1&&Object(b.jsx)("div",{className:"date",children:Object(b.jsx)("span",{children:N===t.time.split(" ")[0]?"TODAY":t.time.split(" ")[0]===A?"YESTERDAY":t.time.split(" ")[0]})}),Object(b.jsxs)("div",{className:"message-block ".concat(i===t.owner?"message-out":"message-in"),children:[Object(b.jsx)("div",{className:"message",children:Object(b.jsxs)("div",{className:"text-block",children:[Object(b.jsx)("div",{className:"text",children:t.text}),Object(b.jsxs)("div",{className:"time-status",children:[t.time.split(" ")[1],Object(b.jsx)("svg",{className:t.status?"opened":"notOpened",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 15",width:"16",height:"15",children:Object(b.jsx)("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})})]})]})}),Object(b.jsx)("svg",{className:"triangle",id:"82734756-3615-4ec8-a382-6c6e9d1975af","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 67.96699 58.57164",children:Object(b.jsx)("path",{className:"0082bf7a-a2e0-46d1-be00-84645c2dcbc6",d:"M280.49486,515.96866l-44.88734,15.11513a.69234.69234,0,0,1-.221.03621H214.69244A.69245.69245,0,0,1,214,530.42756V515.31243a.69244.69244,0,0,1,.69244-.69243h65.58144A.69243.69243,0,0,1,280.49486,515.96866Z",transform:"translate(-213.5 -514.12)"})})]},a+t.id)]},t.id)}))})),v&&Object(b.jsx)("div",{className:"loadingChatBlock",children:Object(b.jsx)("div",{className:"spinner spinner-1"})})]})},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var c=e.getFullYear();return"".concat(t,"/").concat(a,"/").concat(c)},K=function(e,t){return function(a){return fetch("/api/auth/".concat(t),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(e.message)return e.message;localStorage.setItem("token",e.token);var t={name:e.name,email:e.email,telephone:e.telephone,userId:e.userId,token:e.token,role:e.role,description:e.description,photo:e.photo};a($(t)),a(m(!0)),M.emit("userOnline",t.userId),a(z(t.token))}))}},$=function(e){return{type:"USER_LOGIN",payload:e}},ee=function(e){return{type:"INFO_ABOUT_USER_SET",payload:e}},te=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.userData})).token,a=Object(d.c)((function(e){return e.user})).infoAboutUser,c=Object(s.useState)([]),n=Object(o.a)(c,2),i=n[0],l=n[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"search",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsxs)("div",{className:"input-box",children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"})}),Object(b.jsx)("input",{onChange:function(e){var a;(a=e.target.value).length>1&&g.a.post("/api/user/find",{telephone:a},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){l(e.data)}))},type:"text",placeholder:"Start new dialog - enter telephone"})]})})}),Object(b.jsx)("div",{className:"dialogs",children:i.map((function(t,c){return Object(b.jsxs)("div",{onClick:function(){var c;(c=t._id)!==a.id&&e(ee({bool:!0,id:c}))},className:"dialog",children:[Object(b.jsx)(Y.a,{cloudName:"artemijss",publicId:t.photo?t.photo:"tkixqcinuntqmalr2dej",crop:"scale"}),Object(b.jsx)("div",{className:"details",children:Object(b.jsx)("div",{className:"dialog-info1",children:Object(b.jsxs)("div",{className:"dialog-name big-text",children:[t.name," ",t.telephone]})})})]},t._id+c)}))})]})},ae=a(77),ce=a.n(ae),se=a(136),ne=a(12),ie=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.userData})),a=t.name,c=t.description,n=t.token,i=t.photo,l=Object(s.useState)(!0),r=Object(o.a)(l,2),j=r[0],u=r[1],h=Object(s.useState)(!0),O=Object(o.a)(h,2),m=O[0],x=O[1],p=Object(s.useState)(a),v=Object(o.a)(p,2),f=v[0],w=v[1],E=Object(s.useState)(c),N=Object(o.a)(E,2),S=N[0],_=N[1],y=Object(s.useState)(!1),A=Object(o.a)(y,2),I=A[0],D=A[1],k=Object(ne.d)(),L=Object(s.useRef)(),T=function(){var t=Object(se.a)(ce.a.mark((function t(a){return ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.a.post("/api/user/updateImage",{img:a},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e({type:"USER_UPDATE_PHOTO",payload:t.data.photo}),D(!1)}),(function(){k.show("error"),D(!1)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsxs)("div",{className:"image",children:[Object(b.jsx)("input",{ref:L,onChange:function(e){var t=e.target.files[0];if(!t)return!1;D(!0);var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){T(a.result)}},style:{display:"none"},type:"file",accept:"image/*"}),Object(b.jsx)("div",{className:"changePhoto",children:"Change photo"}),Object(b.jsx)(Y.a,{onClick:function(){return L.current.click()},cloudName:"artemijss",publicId:i||"tkixqcinuntqmalr2dej"}),I&&Object(b.jsx)("div",{className:"loadingChatBlock",children:Object(b.jsx)("div",{className:"spinner spinner-1"})})]}),Object(b.jsxs)("div",{className:"name",children:[Object(b.jsx)("span",{children:"Name"}),Object(b.jsxs)("div",{className:j?"update":" update borderBottom",children:[Object(b.jsx)("input",{id:"nameInput",onChange:function(e){w(e.target.value)},type:"text",defaultValue:a,readOnly:j}),j?Object(b.jsx)("div",{onClick:function(){u(!1)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M3.95 16.7v3.4h3.4l9.8-9.9-3.4-3.4-9.8 9.9zm15.8-9.1c.4-.4.4-.9 0-1.3l-2.1-2.1c-.4-.4-.9-.4-1.3 0l-1.6 1.6 3.4 3.4 1.6-1.6z"})})}):Object(b.jsx)("div",{onClick:function(){u(!0),f!==a&&g.a.post("/api/user/updateName",{name:f},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e(function(e){return{type:"USER_UPDATE_NAME",payload:e}}(t.data.name)),k.success("Name was changed")}),(function(){k.show("Name can not be empty"),document.getElementById("nameInput").value=a}))},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M9 17.2l-4-4-1.4 1.3L9 19.9 20.4 8.5 19 7.1 9 17.2z"})})})]})]}),Object(b.jsx)("div",{className:"info"}),Object(b.jsxs)("div",{className:"about",children:[Object(b.jsx)("span",{children:"About"}),Object(b.jsxs)("div",{className:m?"update":" update borderBottom",children:[Object(b.jsx)("input",{id:"aboutInput",onChange:function(e){_(e.target.value)},type:"text",defaultValue:c,placeholder:"enter about yourself",readOnly:m}),m?Object(b.jsx)("div",{onClick:function(){x(!1)},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M3.95 16.7v3.4h3.4l9.8-9.9-3.4-3.4-9.8 9.9zm15.8-9.1c.4-.4.4-.9 0-1.3l-2.1-2.1c-.4-.4-.9-.4-1.3 0l-1.6 1.6 3.4 3.4 1.6-1.6z"})})}):Object(b.jsx)("div",{onClick:function(){x(!0),S!==c&&g.a.post("/api/user/updateAbout",{about:S},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e({type:"USER_UPDATE_ABOUT",payload:t.data.about}),k.success("About was changed")}),(function(){k.show("Error"),document.getElementById("aboutInput").value=c}))},children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M9 17.2l-4-4-1.4 1.3L9 19.9 20.4 8.5 19 7.1 9 17.2z"})})})]})]})]})},le=function(){var e=Object(ne.d)(),t=Object(d.b)(),a=Object(d.c)((function(e){return e.dialog})),c=a.dialogs,n=a.activeDialog,i=Object(d.c)((function(e){return e.user})),l=i.infoAboutUser,r=i.userData,j=Object(s.useState)(""),u=Object(o.a)(j,2),h=u[0],O=u[1],m=Object(s.useState)(""),x=Object(o.a)(m,2),p=x[0],v=x[1],f=Object(s.useState)(""),w=Object(o.a)(f,2),E=w[0],N=w[1],S=Object(s.useState)(""),_=Object(o.a)(S,2),y=_[0],A=_[1],I=Object(s.useState)(""),D=Object(o.a)(I,2),k=D[0],L=D[1],T=Object(s.useState)(""),C=Object(o.a)(T,2),B=C[0],U=C[1],R=Object(s.useState)(!0),F=Object(o.a)(R,2),P=F[0],q=F[1];Object(s.useEffect)((function(){l.id?(q(!0),g.a.get("/api/user/find/".concat(l.id),{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(e){O(e.data.name),N(e.data.status),v(e.data.photo),A(e.data.telephone),L(e.data.email),U(e.data.description),q(!1)}),(function(){q(!1),e.show("error")}))):(n&&(O(c[n].name),N(c[n].status),v(c[n].photo),A(c[n].telephone),L(c[n].email),U(c[n].description)),q(!1))}),[l]);var H=function(){var a,c;t((a=r.token,c=l.id,function(e){return g.a.post("/api/dialog/new",{userId:c},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){e(z(a)).then((function(){e(G(t.data))})),M.emit("newDialog",t.data)}),(function(){return-1}))})).then((function(t){-1===t&&e.show("error")})),t(ee({bool:!1,id:null}))};return Object(b.jsxs)("div",{className:"userInfo",children:[Object(b.jsxs)("div",{className:"box-header",children:[Object(b.jsx)("svg",{onClick:function(){return t(ee({bool:!1,id:null}))},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M19.1 17.2l-5.3-5.3 5.3-5.3-1.8-1.8-5.3 5.4-5.3-5.3-1.8 1.7 5.3 5.3-5.3 5.3L6.7 19l5.3-5.3 5.3 5.3 1.8-1.8z"})}),Object(b.jsx)("div",{className:"title",children:"Profile info"})]}),!P&&Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"user",children:[Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("div",{style:{width:"200px"},children:Object(b.jsx)(Y.a,{cloudName:"artemijss",publicId:p||"tkixqcinuntqmalr2dej"})}),Object(b.jsx)("div",{className:"name",style:n?c[n].deleted&&{color:"rgb(214,48,46)"}:{},children:h}),Object(b.jsx)("div",{className:"status",style:n?c[n].deleted&&{color:"rgb(214,48,46)"}:{},children:n&&c[n].deleted?"DELETED":E?"online":"offline"})]}),l.id&&Object(b.jsxs)("div",{onClick:function(){H()},className:"button",style:{marginBottom:"28px"},children:[Object(b.jsx)("svg",{className:"salat",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M9 17.2l-4-4-1.4 1.3L9 19.9 20.4 8.5 19 7.1 9 17.2z"})}),Object(b.jsx)("div",{className:"flex1 paddingLeft20 salat bold",children:"Add to friends"})]}),Object(b.jsxs)("div",{style:n?c[n].deleted&&{display:"none"}:{},className:"about",children:[Object(b.jsx)("span",{children:"Telephone"}),Object(b.jsx)("div",{children:y})]}),Object(b.jsxs)("div",{style:n?c[n].deleted&&{display:"none"}:{},className:"about",children:[Object(b.jsx)("span",{children:"Email"}),Object(b.jsx)("div",{children:k})]}),Object(b.jsxs)("div",{style:n?c[n].deleted&&{display:"none"}:{},className:"about",children:[Object(b.jsx)("span",{children:"About"}),Object(b.jsx)("div",{children:B||"none"})]}),!l.id&&Object(b.jsxs)("div",{onClick:function(){if(!window.confirm("Are you sure?"))return!1;t(ee({bool:!1,id:null})),t(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(c){return g.a.post("/api/dialog/delete",{dialogId:e,id:a},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){M.emit("dialogDelete",e,a),c(G("")),c(V(e))}))}}(n,r.token,c[n].id))},className:"button",children:[Object(b.jsx)("svg",{className:"red",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M6 18c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6H6v12zM19 3h-3.5l-1-1h-5l-1 1H5v2h14V3z"})}),Object(b.jsx)("div",{className:"flex1 paddingLeft20 red bold",children:"Delete Chat"})]})]})}),P&&Object(b.jsx)("div",{className:"loadingChatBlock",children:Object(b.jsx)("div",{className:"spinner spinner-1"})})]})},re=a(27);var oe=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.dialog})),a=t.dialogs,c=t.activeDialog,n=t.dialogsOrder,i=Object(d.c)((function(e){return e.user.userData})),l=i.token,r=i.userId,O=i.role,m=i.photo,x=Object(d.c)((function(e){return e.user})).infoAboutUser,p=Object(ne.d)(),v=Object(s.useState)(!1),f=Object(o.a)(v,2),w=f[0],E=f[1],N=Object(s.useState)(!1),S=Object(o.a)(N,2),_=S[0],y=S[1],A=Object(s.useState)(x.bool),I=Object(o.a)(A,2),D=I[0],k=I[1],L=Object(s.useState)(""),C=Object(o.a)(L,2),z=C[0],B=C[1],G=Object(s.useState)(!1),U=Object(o.a)(G,2),R=U[0],q=U[1],V=Object(s.useRef)(),W=Object(s.useRef)();Object(s.useEffect)((function(){E(!1),e({type:"MESSAGES_NEW_DELETE"}),c&&(a[c].deleted||M.emit("messageAllStatus",{dialogId:c,id:r}),a[c].dialog.last_message_owner!==r&&e(H(c)))}),[c]),Object(s.useEffect)((function(){x.bool?k(!0):k(!1)}),[x]);var Q=function(e){e.composedPath().includes(V.current)||e.composedPath().includes(W.current)||q(!1)};Object(s.useEffect)((function(){return document.body.addEventListener("click",Q),function(){document.body.removeEventListener("click",Q)}}),[]);var Z=function(t){if(t.preventDefault(),document.querySelector("#sendMessageInput").value="",a[c].deleted)return p.show("THIS CHAT IS DELETED YOU CANT SEND MESSAGES"),!1;var s={recipient:a[c].id,text:z,dialogId:c};if(!z)return p.show("Enter the message text"),!1;g.a.post("/api/message/new",s,{headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){M.emit("newMessage",e.data)}),(function(){p.show("Error with sending message")}));var i=de(),o={_id:"none",text:z,owner:r,recipient:a[c].id,time:i,status:!1,dialogId:c};e(T(o)),e(F(c,o)),n[0]!==c&&e(P(c)),B("")},K=function(){x.id&&e(ee({bool:!0,id:null})),k(!0)};return Object(b.jsxs)("div",{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)("title",{children:"Live Chat"})}),Object(b.jsx)(u,{}),Object(b.jsx)("div",{className:"all-screen",children:Object(b.jsx)("div",{className:"main-box",children:Object(b.jsxs)("div",{className:"whats-app",children:[Object(b.jsxs)("div",{className:"side-bar",children:[w&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"find-header",children:Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("div",{className:"back",children:Object(b.jsx)("svg",{onClick:function(){E(!1)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M12 4l1.4 1.4L7.8 11H20v2H7.8l5.6 5.6L12 20l-8-8 8-8z"})})}),Object(b.jsx)("div",{className:"big-text",children:"New Chat"})]})}),Object(b.jsx)(te,{})]}),_&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"find-header",children:Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("div",{className:"back",children:Object(b.jsx)("svg",{onClick:function(){y(!1)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M12 4l1.4 1.4L7.8 11H20v2H7.8l5.6 5.6L12 20l-8-8 8-8z"})})}),Object(b.jsx)("div",{className:"big-text",children:"Profile"})]})}),Object(b.jsx)(ie,{})]}),!w&&!_&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"box-header",children:[Object(b.jsx)(Y.a,{onClick:function(){return y(!0)},cloudName:"artemijss",publicId:m||"tkixqcinuntqmalr2dej"}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("svg",{id:"ee51d023-7db6-4950-baf7-c34874b80976",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M12 20.664a9.163 9.163 0 0 1-6.521-2.702.977.977 0 0 1 1.381-1.381 7.269 7.269 0 0 0 10.024.244.977.977 0 0 1 1.313 1.445A9.192 9.192 0 0 1 12 20.664zm7.965-6.112a.977.977 0 0 1-.944-1.229 7.26 7.26 0 0 0-4.8-8.804.977.977 0 0 1 .594-1.86 9.212 9.212 0 0 1 6.092 11.169.976.976 0 0 1-.942.724zm-16.025-.39a.977.977 0 0 1-.953-.769 9.21 9.21 0 0 1 6.626-10.86.975.975 0 1 1 .52 1.882l-.015.004a7.259 7.259 0 0 0-5.223 8.558.978.978 0 0 1-.955 1.185z"})}),Object(b.jsx)("svg",{onClick:function(){E(!0)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M19.005 3.175H4.674C3.642 3.175 3 3.789 3 4.821V21.02l3.544-3.514h12.461c1.033 0 2.064-1.06 2.064-2.093V4.821c-.001-1.032-1.032-1.646-2.064-1.646zm-4.989 9.869H7.041V11.1h6.975v1.944zm3-4H7.041V7.1h9.975v1.944z"})}),Object(b.jsx)("svg",{ref:W,className:R?"active":"",onClick:function(){q(!R)},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z"})}),R&&Object(b.jsxs)("div",{className:"settingsPopUp",ref:V,children:[Object(b.jsx)("div",{className:"settingsLink",onClick:function(){y(!0),q(!1)},children:Object(b.jsx)("div",{children:"Profile"})}),Object(b.jsx)("div",{className:"settingsLink",onClick:function(){},children:Object(b.jsx)("div",{children:"Favourites"})}),Object(b.jsx)("div",{className:"settingsLink",onClick:function(){},children:Object(b.jsx)("div",{children:"Settings"})}),Object(b.jsx)("div",{className:"settingsLink",onClick:function(){e((localStorage.removeItem("token"),{type:"USER_LOGOUT"}))},children:Object(b.jsx)("div",{children:"Logout"})})]})]}),"admin"===O&&Object(b.jsx)(re.b,{to:"/admin",children:"AdminPanel"})]}),Object(b.jsx)(h,{}),Object(b.jsx)(J,{})]})]}),c&&Object(b.jsxs)("div",{className:"chat-bar",children:[Object(b.jsxs)("div",{className:"box-header",children:[Object(b.jsx)("div",{className:"padding",children:Object(b.jsx)(Y.a,{onClick:function(){return K()},cloudName:"artemijss",publicId:a[c].photo?a[c].photo:"tkixqcinuntqmalr2dej",crop:"scale"})}),Object(b.jsxs)("div",{onClick:function(){return K()},className:"dialog-info",children:[Object(b.jsx)("div",{className:a[c].deleted?"dialog-name red":"dialog-name",children:a[c].name}),Object(b.jsx)("div",{className:"last-time-seen",style:a[c].deleted&&{color:"rgb(214,48,46)"},children:a[c].deleted?"DELETED":a[c].status?"online":"offline"})]}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M15.9 14.3H15l-.3-.3c1-1.1 1.6-2.7 1.6-4.3 0-3.7-3-6.7-6.7-6.7S3 6 3 9.7s3 6.7 6.7 6.7c1.6 0 3.2-.6 4.3-1.6l.3.3v.8l5.1 5.1 1.5-1.5-5-5.2zm-6.2 0c-2.6 0-4.6-2.1-4.6-4.6s2.1-4.6 4.6-4.6 4.6 2.1 4.6 4.6-2 4.6-4.6 4.6z"})}),Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z"})})]})]}),Object(b.jsx)(X,{}),Object(b.jsx)("div",{className:"footer",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsxs)("form",{onSubmit:Z,className:"input-box",children:[Object(b.jsx)("input",{onChange:function(e){return B(e.target.value)},id:"sendMessageInput",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",disabled:a[c].deleted}),Object(b.jsx)("svg",{role:"button",onClick:Z,type:"submit",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:Object(b.jsx)("path",{fill:"currentColor",d:"M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"})})]})})})]}),!c&&!D&&Object(b.jsx)("div",{className:"chat-bar"}),D&&Object(b.jsx)(le,{})]})})})]})},de=function(){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var a=e.getMonth()+1;a<10&&(a="0"+a);var c=e.getFullYear(),s=e.getHours();s<10&&(s="0"+s);var n=e.getMinutes();n<10&&(n="0"+n);var i=e.getSeconds();return i<10&&(i="0"+i),"".concat(t,"/").concat(a,"/").concat(c," ").concat(s,":").concat(n," ").concat(i)};var je=function(){var e=Object(d.b)(),t=Object(ne.d)(),a=Object(s.useState)(!1),n=Object(o.a)(a,2),i=n[0],l=n[1],r=Object(s.useState)({email:"",password:""}),u=Object(o.a)(r,2),h=u[0],O=u[1],g=function(e){O(Object(c.a)(Object(c.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)("title",{children:"Login"})}),Object(b.jsx)("div",{className:"header bg-overlay"}),Object(b.jsx)("div",{className:"all-screen",children:Object(b.jsx)("div",{className:"main-box",children:Object(b.jsxs)("form",{className:"formLogin",onSubmit:function(a){a.preventDefault(),l(!0),e(K(h,"login")).then((function(e){e&&(l(!1),t.show(e))}))},children:[i?Object(b.jsx)("h1",{children:"Loading"}):Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"email",children:"E-mail"})]}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"password",id:"pass",name:"password",minLength:"6",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"pass",children:"Password"})]}),Object(b.jsx)("button",{type:"submit",children:"LOGIN"}),Object(b.jsx)(re.b,{to:"/registration",children:"Not a member? Sign in!"})]})})})]})};var be=function(){var e=Object(d.b)(),t=Object(ne.d)(),a=Object(s.useState)(!1),n=Object(o.a)(a,2),i=n[0],l=n[1],r=Object(s.useState)({telephone:"",name:"",email:"",password:""}),u=Object(o.a)(r,2),h=u[0],O=u[1],g=function(e){O(Object(c.a)(Object(c.a)({},h),{},Object(N.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{children:[Object(b.jsx)(j.a,{children:Object(b.jsx)("title",{children:"Registration"})}),Object(b.jsx)("div",{className:"header bg-overlay"}),Object(b.jsx)("div",{className:"all-screen",children:Object(b.jsx)("div",{className:"main-box",children:Object(b.jsxs)("form",{className:"formLogin",onSubmit:function(a){a.preventDefault(),l(!0),e(K(h,"register")).then((function(e){e&&(l(!1),t.show(e))}))},children:[i?Object(b.jsx)("h1",{children:"Loading"}):Object(b.jsx)("h1",{children:"Registration"}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"tel",id:"telephone",name:"telephone",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"telephone",children:"Telephone"})]}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"tel",id:"name",name:"name",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"email",children:"E-mail"})]}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"password",id:"password",name:"password",minLength:"6",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"pass",children:"Password"})]}),Object(b.jsxs)("div",{className:"text_field",children:[Object(b.jsx)("input",{type:"password",id:"confirm_password",name:"password",minLength:"6",required:!0,onChange:g}),Object(b.jsx)("span",{}),Object(b.jsx)("label",{htmlFor:"pass",children:"Confirm Password"})]}),Object(b.jsx)("button",{type:"submit",children:"REGISTER"}),Object(b.jsx)(re.b,{to:"/login",children:"Already registered? Log in!"})]})})})]})},ue=function(){return Object(b.jsxs)("div",{className:"sk-circle",children:[Object(b.jsx)("div",{className:"sk-circle1 sk-child"}),Object(b.jsx)("div",{className:"sk-circle2 sk-child"}),Object(b.jsx)("div",{className:"sk-circle3 sk-child"}),Object(b.jsx)("div",{className:"sk-circle4 sk-child"}),Object(b.jsx)("div",{className:"sk-circle5 sk-child"}),Object(b.jsx)("div",{className:"sk-circle6 sk-child"}),Object(b.jsx)("div",{className:"sk-circle7 sk-child"}),Object(b.jsx)("div",{className:"sk-circle8 sk-child"}),Object(b.jsx)("div",{className:"sk-circle9 sk-child"}),Object(b.jsx)("div",{className:"sk-circle10 sk-child"}),Object(b.jsx)("div",{className:"sk-circle11 sk-child"}),Object(b.jsx)("div",{className:"sk-circle12 sk-child"})]})};var he=function(){var e=function(){var e=Object(d.c)((function(e){return e.user})).userData;return Object(d.c)((function(e){return e.loading})).userLoading?Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/",exact:!0,children:Object(b.jsx)(ue,{})}),Object(b.jsx)(r.a,{to:"/"})]}):e.userId?Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/",exact:!0,children:Object(b.jsx)(oe,{})}),"admin"===e.role&&Object(b.jsx)(r.b,{path:"/admin",exact:!0,children:Object(b.jsx)("div",{children:"ADMINKA"})}),Object(b.jsx)(r.a,{to:"/"})]}):Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/login",exact:!0,children:Object(b.jsx)(je,{})}),Object(b.jsx)(r.b,{path:"/registration",exact:!0,children:Object(b.jsx)(be,{})}),Object(b.jsx)(r.a,{to:"/login"})]})}(),t=Object(d.b)();return Object(s.useEffect)((function(){t((function(e){var t=localStorage.token;if(e(m(!0)),t)return fetch("/api/auth/check",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(a){if(a.message)console.log(a.message),localStorage.removeItem("token"),e(m(!1));else{var c={name:a.name,email:a.email,telephone:a.telephone,userId:a.userId,token:t,role:a.role,description:a.description,photo:a.photo};e($(c)),M.emit("userOnline",c.userId),e(z(t))}}));e(m(!1))}))}),[]),Object(b.jsx)(re.a,{children:e})},Oe=function(e){var t=e.color,a=e.pushRight,c=void 0===a||a,s=e.children;return n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:c?"20px":"0",minWidth:24}},s)},ge=function(){return n.a.createElement(Oe,{color:"#e93333"},n.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),n.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"8"}))},me=function(){return n.a.createElement(Oe,{color:"#31B404"},n.a.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.a.createElement("polyline",{points:"22 4 12 14.01 9 11.01"}))},xe=function(){return n.a.createElement(Oe,{color:"#FF0040"},n.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16"}))},pe=function(){return n.a.createElement(Oe,{color:"#FFFFFF",pushRight:!1},n.a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},fe={backgroundColor:"#2f9688",color:"white",padding:"10px",textTransform:"uppercase",borderRadius:"3px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0px 2px 2px 2px rgba(0, 0, 0, 0.03)",fontFamily:"Arial",width:"300px",boxSizing:"border-box"},we={marginLeft:"20px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#FFFFFF"},Ee=function(e){var t=e.message,a=e.options,c=e.style,s=e.close;return n.a.createElement("div",{style:ve({},fe,c)},"info"===a.type&&n.a.createElement(ge,null),"success"===a.type&&n.a.createElement(me,null),"error"===a.type&&n.a.createElement(xe,null),n.a.createElement("span",{style:{flex:2}},t),n.a.createElement("button",{onClick:s,style:we},n.a.createElement(pe,null)))},Ne={position:ne.b.TOP_CENTER,timeout:5e3,offset:"30px",background:"#2f9688",transition:ne.c.SCALE};l.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(d.a,{store:L,children:Object(b.jsx)(ne.a,Object(c.a)(Object(c.a)({template:Ee},Ne),{},{children:Object(b.jsx)(he,{})}))})}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.4506f7ac.chunk.js.map